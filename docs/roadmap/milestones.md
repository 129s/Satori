# 任务与里程碑

## M1: KS 最小原型 ✅
- [x] 建立基础工程结构（CMake + src/main.cpp）
- [x] 实现 KarplusStrongString（可设置频率、阻尼、持续时间）
- [x] 实现 WaveWriter，输出 16-bit PCM WAV
- [x] 在 main 中串起流程，支持简单命令行参数
- [x] 跑通单弦测试（如 A4=440Hz，时长 2 秒）并验证输出

## M2: 声音设计扩展（进行中）
- [x] 可插拔滤波器链（首个一阶低通）
- [x] 弦模型参数化（拾音点、噪声类型、随机种子）
- [x] 增加多复音调度，允许同时触发多根弦

## M3: 环境与交互
1. 加入卷积混响（可读取 IR 文件）
2. 增加键盘/简单 MIDI 输入到触发层
3. 打包示范预设与文档

## M4: Win32 GUI 与实时音频（规划中）
1. 拆分 `core` 静态库，复用到 CLI/Win32 双前端 ✅
2. 封装 WASAPI（或 XAudio2）`AudioEngine`，提供事件触发与线程安全参数同步 ✅
3. 构建 WinMain + 消息循环骨架，管理 COM 初始化、窗口生命周期与音频引擎绑定（已提供键盘触发 demo） ✅
4. 建立 Direct2D 自绘 UI：旋钮/滑块、波形监视、虚拟键盘，支持参数-引擎联动 ⏳
5. 支持预设存储（JSON/YAML）与最小打包脚本，产出独立 EXE 演示 ⏳
6. 完善实时音频诊断与日志，解决“引擎启动失败”问题，并在无设备环境下优雅降级 ⏳

## 待办池
- 音频参数配置文件（YAML/JSON）
- 自动化测试：波形能量/时长校验
- 引入 CI，构建并上传演示 WAV
- 评估 DirectWrite 文本渲染与多语言字体策略
- 设计 UI 皮肤系统与快捷键映射
- 提供 WASAPI mock 或测试跳过机制，保证 headless 环境流水线可运行
