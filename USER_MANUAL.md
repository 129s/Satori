# Satori 用户说明手册

本文面向 `SatoriWinApp` 用户，介绍界面结构、基础操作、预设与常见问题排查。

## 1. 快速上手

### 1.1 运行

- 已编译版本：直接运行 `SatoriWinApp.exe`
- 从源码构建（示例）：
  - `cmake -S . -B build`
  - `cmake --build build --target SatoriWinApp`
  - 运行：`.\build\SatoriWinApp.exe`

### 1.2 发声

- 点击底部虚拟键盘即可发声，松开停止
- 也可使用电脑键盘触发（默认一组）：
  - 白键：`A S D F G H J`
  - 黑键：`W E T Y U`
  - 注：请先点击窗口使其获得焦点

## 2. 界面结构（Physical Modeling 信号流）

主界面按模块从左到右对应信号流：

`Excitation（激励） -> String（弦） -> Body（共鸣体） -> Room（空间/混响）`

每个模块卡片通常包含：

- 上半区：可视化窗口（用于直观反馈当前模块行为）
- 下半区：旋钮参数区（用于调参）

## 3. 关键参数说明

### 3.1 Excitation（激励）

- `Noise Type`：激励噪声类型
- `Hardness`：激励亮度/硬度
- `Mix`：激励混合强度
- `Vel. Sens`：力度敏感度
- `Position`：拨弦位置（在上方可视化区域内拖动）

### 3.2 String（弦）

- `Decay`：衰减/延音长度
- `Brightness`：整体亮度（高频保留程度）
- `Dispersion`：色散量（更“金属/钟鸣”）

### 3.3 Body（共鸣体）

- `Body Tone`：音色重心/共鸣倾向
- `Body Size`：共鸣体尺寸感（共振峰“宽/窄”的变化）

### 3.4 Room（卷积混响）

Room 模块为卷积混响结构，面板布局（从上到下）类似 Serum：

1. `IR` 下拉选择
2. IR 波形窗口（显示当前 IR 的预览波形）
3. `Mix` 旋钮（干湿混合）

IR 选择交互：

- 左右箭头：循环切换 IR（到末尾会回到开头）
- 点击中间名称：展开/收起下拉列表
- 下拉列表：分页显示（`Prev/Next` 翻页，无滚动条）

## 4. 旋钮操作

- 单击并上下拖动：调整数值（上拖增大，下拖减小）
- 双击：复位到默认值

## 5. 预设（Preset）

程序启动时会尝试从 `presets/` 目录加载默认预设：

- `presets/default.json`

Room 相关字段：

- 新字段：`roomMix`、`roomIR`（IR 用稳定 ID 存储）
- 兼容字段：仍会读取/写入旧字段 `roomAmount`

## 6. 常见问题排查

### 6.1 没有声音

- 检查系统输出设备与音量
- 确认已触发虚拟键盘或电脑键盘按键
- 若启动时提示音频初始化失败，检查设备占用/驱动状态

### 6.2 Room 调了不明显

- 确认 `Mix` > 0
- 切换不同 `IR`（不同 IR 的空间感差异更明显）
- 确认 `Master Gain` 不为 0，且声音本身有足够延音/能量

